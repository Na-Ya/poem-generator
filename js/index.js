var originalText =
    "i'm no supervising technician, i'm a technical supervisor. beer. now there's a temporary solution. you can't depend on me all your life. you have to learn that there's a little in all of us. when will i learn? the answer to life's problems aren't at the bottom of a bottle, they're on TV  ! now, remember! as far as anyone knows, we're a nice, normal family. the code of the schoolyard, ! the rules that teach a boy to be a man. let's see. don't tattle. always make fun of those different from you. never say anything, unless you're sure everyone feels exactly the same way you do. what else. and there's nothing wrong with hitting someone when his back is turned. i can understand how they wouldn't let in those wild jungle apes, but what about those really smart ones who live among us? who roller-skate and smoke cigars? i'm glad you asked, son. being popular is the most important thing in the world! you're not talking about killing anyone, are you? are you! then run along, you little scamp! operator, give me the number for nine-one-one! and lord, we are especially thankful for nuclear power, the cleanest, safest energy source there is. except for solar, which is just a pipe dream. because sometimes the only way you can feel good about yourself is by making someone else look bad. and i'm tired of making other people feel good about themselves! hey , it's no use praying. i already did the same thing, and we can't both win. actually, simpson, we were praying that no one gets hurt. you heard me, i won't be in for the rest of the week. i told you! my baby beat me up! no, it is not the worst excuse i ever thought up. ah, good ol' trustworthy beer. my love for you will never die. i want to share something with you the three little sentences that will get you through life. number  cover for me. number  oh, good idea, boss! number it was like that when i got here. dear god, just give me one channel! pffft, english who needs that. i'm never going to england. well, you bought all those smoke alarms, and we haven't had a single fire. quiet you kids. if i hear one more word, doesn't get to watch cartoons, and doesn't get to go to college. hey, just because i don't care doesn't mean i don't understand! son, i'm proud of you. i was twice your age before i figured that out. oh, , cartoons don't have any deep meaning. they're just stupid drawings that give you a cheap laugh. a job's a job. i mean, take me. if my plant pollutes the water and poisons the town, by your logic, that would make me a criminal. here's good news! according to this eye-catching article, SAT scores are declining at a slower rate! hey, this is the only paper in america that's not afraid to tell the truth, that everything is just fine. yeah, you know, boys, a nuclear reactor is a lot like a woman. you just have to read the manual and press the right buttons. because she stopped loving me. well, i know you love me, so you don't get squat. hee hee hee. don't you ever, ever talk that way about television. your mother has this crazy idea that gambling is wrong. even though they say it's okay in the bible. uh somewhere in the back. no matter how good you are at something, there's always about a million people better than you. well, he's got all the money in the world, but there's one thing he can't buy. i can't fake an interest in this, and i'm an expert at faking an interest in your kooky projects. you know, the painting class, the first aid course, the whole lamaze thing. , it takes two to lie. one to lie and one to listen. i hate all the programs likes, but it's no big deal. you know why? whenever turns on one of her non-violent programs, i take a walk. i go to a bar, i pound a few, then i stumble home in the mood for love. if something's hard to do, then it's not worth doing! , where's that metal you use to dig food yeah, yeah! , there's an empty spot i've always had inside me. i tried to fill it with family, religion, community service, but those were dead ends! i think this chair is the answer. son, if you really want something in this life, you have to work for it. now quiet! they're about to announce the lottery numbers. there you go again, always taking someone else's side. , the water department, god i'm not a bad guy! i work hard, and i love my kids. so why should i spend half my sunday hearing about how i'm going to hell? when it comes to compliments, women are ravenous blood-sucking monsters always wanting more more more! and if you give it to them, you'll get plenty back in return. i'll tell you when you're older. you know, when i was a boy, i really wanted a catcher's mitt, but my dad wouldn't get it for me. so i held my breath until i passed out and banged my head on the coffee table. the doctor thought i might have brain damage. i like stories. if something goes wrong at the plant, blame the guy who can't speak english. well! i won't sleep in the same bed with a woman who thinks i'm lazy. i'm going to go right downstairs, unfold the couch, unroll the sleeping bag, good-night. son, a woman is a lot like a a refrigerator! they're about six feet tall,  pounds. they make ice, and um oh, wait a minute. actually, a woman is more like a beer. they smell good, they look good, you'd step over your own mother just to get one! but you can't stop at one. you wanna drink another woman! well, i really should discuss this with my wife. what, you think i'm going to buy a $, truck just because you make that noise? if you're going to get mad at me every time i do something stupid, then i guess i'll just have to stop doing stupid things! it's not easy to juggle a pregnant wife and a troubled child, but somehow i managed to fit in eight hours of TV   a day. the sooner kids talk, the sooner they talk back. i hope you never say a word. kids, kids. i'm not going to die. that only happens to bad people. don't worry, . america's health care system is second only to japan, canada, sweden, great britain, well, all of europe, but you can thank your lucky stars we don't live in paraguay! donuts is there anything they can't do? let me handle this, , i've heard 'em all. i like you as a friend. i think we should see other people. i don't speak english. i'm married to the sea. i don't wanna kill you, but i will. sure it is, honey. you do mean stealing, don't you? all right brain, you don't like me, and i don't like you. but let's just get me through this, and i can get back to killing you with beer. , i'm going to miss you so much. and it's not just the . it's also the food preparation. yeah, but i'm not gonna let it change our lives. i'll be the same loving father i've always been. woo-hoo! i'm a college man! i won't need my high school diploma any more! i am so smart! i am so smart! i am so smart! i am so smart! oh, , you and your stories. is a vampire. beer kills brain cells. now let's go back to that building thingy, where our beds and TV   is. heh, heh. , vampires are make-believe, just like elves, gremlins, and eskimos. kill my boss? do i dare to live out the american dream? hmm ow, pointy! eww, slimy. oh, moving! ah-ha! oh, twenty dollars i wanted a peanut! explain how. oh, sure. you just lie down and tell me all about it. aah! bogeyman! you nail the windows shut, i'll get the gun! , i don't want to alarm you, but there may be a bogeyman or bogeymen in the house! aw, people can come up with statistics to prove anything 10 percent of all people know that. aw, dad. you've done a lot of great things, but you're a very old man now, and old people are useless. i'm a white male, age  to . everyone listens to me no matter how dumb my suggestions are. for once maybe someone will call me sir without adding you're making a scene. ah, TV   respects me. it laughs with me, not at me! are you mad, woman? you never know when an old calendar might come in handy. sure, it's not  now, but who knows what tomorrow will bring? and these TV   guides so many memories. i agree with you in theory. in theory, communism works. in theory. son, when you participate in sporting events, it's not whether you win or lose it's how drunk you get. kids, you tried your best, and you failed miserably. the lesson is, never try. in america, first you get the sugar, then you get the power, then you get the women you think i don't want to? it's those TV   networks, they won't let me. one quality show after another, each one fresher and more brilliant than the last. if they only stumbled once, just gave us thirty minutes to ourselves, but they won't! they won't let me live! oh, and how is education supposed to make me feel smarter? besides, every time i learn something new, it pushes some old stuff out of my brain. remember when i took that home wine-making course and i forgot how to drive?  please, old people don't need companionship. they need to be isolated and studied so it can be determined what nutrients they have that might be extracted for our personal use. television! teacher, mother, secret lover. , if the bible has taught us nothing else and it hasn't it's that girls should stick to girls' sports, such as hot-oil wrestling, foxy boxing, and such-and-such. oh, maybe TV   is right. TV   always right! well, , remember that postcard grampa sent us from florida of that alligator biting that woman's bottom? that's right, we all thought it was hilarious. but it turns out we were wrong that alligator was sexually harassing that woman. come on, , i want to shake off the dust of this one-horse town. i want to explore the world. i want to watch TV   in a different time zone. i want to visit strange, exotic malls. i'm sick of eating hoagies. i want a grinder, a sub, a foot-long hero i want to live , ! won't you let me live ? won't you please?! i've always wondered if there was a god. and now i know there is and it's me. so here's the deal you freeze everything as it is, and i won't ask for anything more. if that is ok, please give me absolutely no sign. ok, deal. in gratitude, i present you this offering of cookies and milk. if you want me to eat them for you, please give me no sign. thy will be done! the information superhighway showed the average person what some nerd thinks about star trek. uh, , the whole reason we have elected officials is so we don't have to think all the time. just like that rainforest scare a few years back our officials saw there was a problem and they fixed it, didn't they? oh, ok , i'll get along with them. then, i will hug some snakes yes! then, i will hug and kiss some poisonous snakes. now that's sarcasm. i'm with you, . ! get in here. in this house, we obey the laws of thermodynamics! , if you don't like your job, you don't strike you just go in every day and do it really half assed. that's the american way. kids, kids, kids. as far as daddy's concerned, you're both potential murderers. , you being a cop makes you the man which makes me the woman. i have no interest in that, besides occasionally wearing the underwear, which, as we discussed, is strictly a comfort thing. well, it's like the time that your cat snowball got run over. remember, honey? what i'm saying is, all we have to do is go down to the pound and get a new jazzman. forty seconds? but i want it now! ham? pork chops? yeah, right . a wonderful, magical animal. all normal people love meat. if i went to a barbeque and there was no meat, i would say yo goober! where's the meat. i'm trying to impress people here . you don't win friends with salad. to start press any key. where's the any key? there doesn't seem to be any any key. woo! all this computer hacking is making me thirsty. i think i'll order a tab. the slim lazy homer you knew is dead. now i'm a big fat dynamo! and where's that cake? , i'm bored. because i'm trying to reduce my boredom. come on, your mother’s only trying to help. so go ahead and enjoy the show. but i’m not a genius. why should i suffer? those perfectionists? forget it. well. live and learn. a boy without mischief is like a bowling ball without a liquid center. tell him i’m going to the backseat of my car with the woman i love. and i won’t be back for ten minutes! okay. i’m not going to kill you, but i’m going to tell you three things that will haunt you the rest of your days. you ruined your father. you crippled your family. and baldness is hereditary! i can’t wear a pink shirt to work. everybody wears white shirts. i’m not popular enough to be different. that sounds too complicated. with today’s gasoline prices we can’t afford not to buy a pony. your father needs your help. do you know anything about germany? money comes and money goes, but what i have in my daughter can go on for eight more years. the doll’s trying to kill me and the toaster’s been laughing at me! he was a zombie? all the time. it was the title of our second album. just because you’re ten feet tall doesn’t mean you can tell me what to do. remember when i let that escaped lunatic in the house because he was dressed like santa claus? well you have a gambling problem! you’ll have to speak up. i’m wearing a towel. if it makes you feel any better, i’ve learned that life is just one crushing defeat after another until you just wish was dead. or what? you’ll release the dogs. or the bees. or the dogs with bees in their mouth and when they bark they shoot bees at you? well go ahead! do your worst. i didn’t tell them personal stuff. i was a political prisoner! television! teacher. mother. secret lover.why don’t those stupid idiots let me in their stupid club for jerks? black panthers? who am i clowning? i have no business being a clown. i’m leaving the clowning business to all the other clowns in the clowning business. well if we agree then why are we arguing. that’s no reason to block the TV  . well it’s always in the last place you look. The strong must protect the sweet. Stealing! How could you! Haven't you learned anything from that guy who gives those sermons at church? Captain What's his name? I'm in a place where I don't know where I am! When I look at the smiles on all the children's faces, I just know they're about to jab me with something. First you don't want me to get the pony, then you want me to take it back. Make up your mind If something is to hard to do, then it's not worth doing. You just stick that guitar in the closet next to your shortwave radio, your karate outfit and your unicycle and we'll go inside and watch TV. What do we need a psychiatrist for? We know our kid is nuts. Well, you can't go wrong with cocktail weenies. They taste as good as they look. And they come in this delicious red sauce. It looks like catsup it tastes like catsup. But brother, it ain't catsup. American cheese. OK, son. Just remember to have fun out there today, and if you lose, I'LL KILL YOU. God bless those pagans. Let us all bask in television's warm glowing warming glow. Ah, beer, my one weakness. My Achille's heel, if you will. I hope I didn't brain my damage. This perpetual motion machine she made is a joke It just keeps going faster and faster. In this house, we obey the laws of THERMODYNAMICS! It's like something out of that twilighty show about that zone. I know you can read my thoughts boy Meow, Meow, Meow, Meow, Meow, Meow, Meow, Meow, Meow, Meow, Meow, Meow, Meow, Meow, Meow, Meow. Don't eat me. I have a wife and kids. Eat them. Ah, the college roadtrip. What better way to spread beer-fueled mayhem. Son, this is the only time I'm ever gonna say this. It is not okay to lose. Do I know what rhetorical means. That's it! You people have stood in my way long enough. I'm going to clown college. They have the Internet on computers, now. Let us celebrate our agreement with the adding of chocolate to milk. Kill myself? Killing myself is the last thing I'd ever do. Now I have a purpose, a reason to live. I don't care who I have to face, I don't care who I have to fight, I will not rest until this street gets a stop sign. Safety? But sir! If truth be known, I actually caused more accidents around here than any other employee, including a few doozies no one ever found out about";

function parseText(originalText) {
  originalText = originalText.toLowerCase();
  var firstSplit = originalText.split(/[,.?!;:]/g).join("  ");
  var arrayOfOriginalText = firstSplit.split(/\s+/);

  return arrayOfOriginalText;
}

function generateWordPairObject(originalText) {
  var wordPairObject = {};
  arrayOfOriginalText = parseText(originalText);
  for (var i = 0; i < arrayOfOriginalText.length - 1; i++) {
    wordPairObject[arrayOfOriginalText[i]] = [];
  }
  var allTheObjectKeys = Object.keys(wordPairObject);

  for (var j = 0; j < arrayOfOriginalText.length; j++) {
    for (x = 0; x < allTheObjectKeys.length; x++) {
      if (
        arrayOfOriginalText[j] === allTheObjectKeys[x] &&
        arrayOfOriginalText[j + 1] !== undefined &&
        arrayOfOriginalText[j + 1] !== ""
      ) {
        wordPairObject[arrayOfOriginalText[j]].push(arrayOfOriginalText[j + 1]);
      }
    }
  }
  return wordPairObject;
}

function randomize(array) {
  var randomIndex = Math.floor(Math.random() * array.length);

  return array[randomIndex];
}

function poemLineGenerator(originalText, numOfWordsPerLine) {
  var lineOfPoetry = [];
  var wordPairObject = generateWordPairObject(originalText);
  var objKeys = Object.keys(wordPairObject);
  var firstWord = randomize(objKeys);
  lineOfPoetry.push(firstWord);
  for (var i = 1; i < numOfWordsPerLine; i++) {
    var nextWord = randomize(wordPairObject[firstWord]);
    lineOfPoetry.push(nextWord);
    firstWord = nextWord;
  }
  lineOfPoetry = lineOfPoetry.join(" ");
  return lineOfPoetry;
}

function generatePoem(originalText, numOfLines) {
  var fullPoem = "";
  for (var i = 0; i < numOfLines; i++) {
    var numOfWordsPerLine = Number(
      document.getElementById("WordsPerLine").value
    );
    if (isNaN(numOfWordsPerLine) || numOfWordsPerLine <= 0) {
      alert("D'oh! Please enter a valid number!");
      return document.getElementById("currentPoem").innerHTML;
    }
    var linesOfPoem = poemLineGenerator(originalText, numOfWordsPerLine);
    linesOfPoem = linesOfPoem[0].toUpperCase() + linesOfPoem.slice(1);
    if (i !== numOfLines - 1) {
      fullPoem += linesOfPoem + "," + "<br>";
    } else {
      fullPoem += linesOfPoem + "!";
    }
  }
  return fullPoem;
}

document.getElementById("newPoem").onclick = function(event) {
  document.getElementById("currentPoem").innerHTML = generateVariables();
  event.preventDefault();

  function generateVariables() {
    var totalLinesPerPoem = Number(
      document.getElementById("LinesPerPoem").value
    );
    if (isNaN(totalLinesPerPoem) || totalLinesPerPoem <= 0) {
      alert("D'oh! Please enter a valid number!");
    }
    var fullPoem = generatePoem(originalText, totalLinesPerPoem);
    return fullPoem;
  }
};